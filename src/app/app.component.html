<mat-card>
  <div class="table-container">
    <table
      mat-table
      [dataSource]="(data | async) || []"
      matSort
      (matSortChange)="onSort($event)"
    >
      <ng-container matColumnDef="notes">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Notes</th>
        <td mat-cell *matCellDef="let element">
          <mat-icon [style.color]="element.notes ? 'red' : 'grey'"
            >error</mat-icon
          >
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Actions</th>
        <td mat-cell *matCellDef="let element">{{ element.actions }}</td>
      </ng-container>

      <ng-container matColumnDef="openAlerts">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Open Alerts</th>
        <td mat-cell *matCellDef="let element">{{ element.openAlerts }}</td>
      </ng-container>

      <ng-container matColumnDef="clearedAlerts">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Cleared Alerts
        </th>
        <td mat-cell *matCellDef="let element">{{ element.clearedAlerts }}</td>
      </ng-container>

      <ng-container matColumnDef="startOfYear">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Start of Year</th>
        <td mat-cell *matCellDef="let element">{{ element.startOfYear }}</td>
      </ng-container>

      <ng-container matColumnDef="startOfMonth">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Start of Month
        </th>
        <td mat-cell *matCellDef="let element">{{ element.startOfMonth }}</td>
      </ng-container>

      <ng-container matColumnDef="lastMonth">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Month</th>
        <td mat-cell *matCellDef="let element">{{ element.lastMonth }}</td>
      </ng-container>

      <ng-container matColumnDef="today">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Today</th>
        <td mat-cell *matCellDef="let element">{{ element.today }}</td>
      </ng-container>

      <ng-container matColumnDef="monthly">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Monthly</th>
        <td mat-cell *matCellDef="let element">{{ element.monthly }}</td>
      </ng-container>

      <ng-container matColumnDef="weekly">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Weekly</th>
        <td mat-cell *matCellDef="let element">{{ element.weekly }}</td>
      </ng-container>

      <ng-container matColumnDef="threeDays">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Three Days</th>
        <td mat-cell *matCellDef="let element">{{ element.threeDays }}</td>
      </ng-container>

      <ng-container matColumnDef="yesterday">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Yesterday</th>
        <td mat-cell *matCellDef="let element">{{ element.yesterday }}</td>
      </ng-container>

      <ng-container matColumnDef="communication">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Communication</th>
        <td mat-cell *matCellDef="let element">
          <mat-icon [style.color]="element.communication ? 'green' : 'red'">
            {{ element.communication ? 'wifi' : 'wifi_off' }}
          </mat-icon>
        </td>
      </ng-container>

      <ng-container matColumnDef="portal">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Portal</th>
        <td mat-cell *matCellDef="let element">{{ element.portal }}</td>
      </ng-container>

      <ng-container matColumnDef="kWp">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>kWp</th>
        <td mat-cell *matCellDef="let element">{{ element.kWp }}</td>
      </ng-container>

      <ng-container matColumnDef="systemName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>System Name</th>
        <td mat-cell *matCellDef="let element">{{ element.systemName }}</td>
      </ng-container>

      <ng-container matColumnDef="tested">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Tested</th>
        <td mat-cell *matCellDef="let element">
          {{ element.tested ? 'Yes' : 'No' }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</mat-card>
